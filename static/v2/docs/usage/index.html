<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title></title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link href="../../css/custom.css" rel="stylesheet">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script src="../../search/main.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="" class="icon icon-home"> </a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
   
  <span class="toctree-l0">Home</span>
  
  <li class="toctree-l1 ">
    <a class="" href=""
      >Welcome</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="imprint/"
      >Imprint</a
    >
    
  </li>
     
  <span class="toctree-l0">Articles</span>
  
  <li class="toctree-l1 ">
    <a class="" href="articles/getting-started/"
      >Getting started</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="articles/heroku/"
      >Heroku</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="articles/express/"
      >Usage with Express.JS</a
    >
    
  </li>
     
  <span class="toctree-l0">Docs</span>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/installation/"
      >Installation</a
    >
    
  </li>
  
  <li class="toctree-l1 current">
    <a class="current" href="docs/usage/"
      >Usage</a
    >
    
    <ul>
      
    </ul>
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/promises/"
      >Promises</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/models/"
      >Models</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/instances/"
      >Instances</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/associations/"
      >Associations</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/hooks/"
      >Hooks</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/transactions/"
      >Transactions</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/migrations/"
      >Migrations</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="docs/misc/"
      >Misc</a
    >
    
  </li>
     
  <span class="toctree-l0">API</span>
  
  <li class="toctree-l1 ">
    <a class="" href="api/sequelize/"
      >Sequelize</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/model/"
      >Model</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/instance/"
      >Instance</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/associations/"
      >Associations</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/hooks/"
      >Hooks</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/promise/"
      >Promise</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/transaction/"
      >Transaction</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/datatypes/"
      >Datatypes</a
    >
    
  </li>
  
  <li class="toctree-l1 ">
    <a class="" href="api/errors/"
      >Errors</a
    >
    
  </li>
    
</ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href=""></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="">Docs</a> &raquo;</li>
    <li>Usage</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h2 id="basic-usage">Basic usage</h2>
<p>To get the ball rollin' you first have to create an instance of Sequelize&period; Use it the following way&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username'[, 'password'])
</code></pre>
<p>This will save the passed database credentials and provide all further methods&period; Furthermore you can specify a non-default host&sol;port&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username', 'password', {
  host: &quot;my.server.tld&quot;,
  port: 12345
})
</code></pre>
<p>If you just don't have a password&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username')
// or
var sequelize = new Sequelize('database', 'username', null)
</code></pre>
<p>You can also use a connection string&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('mysql://user:pass@example.com:9821/dbname', {
  // Look to the next section for possible options
})
</code></pre>
<h2 id="options">Options</h2>
<p>Besides the host and the port&comma; Sequelize comes with a whole bunch of options&period; Here they are&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username', 'password', {
  // custom host; default: localhost
  host: 'my.server.tld',
 
  // custom port; default: 3306
  port: 12345,
 
  // custom protocol
  // - default: 'tcp'
  // - added in: v1.5.0
  // - postgres only, useful for heroku
  protocol: null,
 
  // disable logging; default: console.log
  logging: false,
 
  // max concurrent database requests; default: 50
  maxConcurrentQueries: 100,
 
  // the sql dialect of the database
  // - default is 'mysql'
  // - currently supported: 'mysql', 'sqlite', 'postgres', 'mariadb'
  dialect: 'mysql',
 
  // you can also pass any dialect options to the underlying dialect library
  // - default is empty
  // - currently supported: 'mysql', 'mariadb'
  dialectOptions: {
    socketPath: '/Applications/MAMP/tmp/mysql/mysql.sock',
    supportBigNumbers: true,
    bigNumberStrings: true
  },
 
  // the storage engine for sqlite
  // - default ':memory:'
  storage: 'path/to/database.sqlite',
 
  // disable inserting undefined values as NULL
  // - default: false
  omitNull: true,
 
  // a flag for using a native library or not.
  // in the case of 'pg' -- set this to true will allow SSL support
  // - default: false
  native: true,
 
  // Specify options, which are used when sequelize.define is called.
  // The following example:
  //   define: {timestamps: false}
  // is basically the same as:
  //   sequelize.define(name, attributes, { timestamps: false })
  // so defining the timestamps for each model will be not necessary
  // Below you can see the possible keys for settings. All of them are explained on this page
  define: {
    underscored: false
    freezeTableName: false,
    syncOnAssociation: true,
    charset: 'utf8',
    collate: 'utf8_general_ci',
    classMethods: {method1: function() {}},
    instanceMethods: {method2: function() {}},
    timestamps: true
  },
 
  // similiar for sync: you can define this to always force sync for models
  sync: { force: true },
 
  // sync after each association (see below). If set to false, you need to sync manually after setting all associations. Default: true
  syncOnAssociation: true,
 
  // use pooling in order to reduce db connection overload and to increase speed
  // currently only for mysql and postgresql (since v1.5.0)
  pool: { maxConnections: 5, maxIdleTime: 30},
 
  // language is used to determine how to translate words into singular or plural form based on the [lingo project](https://github.com/visionmedia/lingo)
  // options are: en [default], es
  language: 'en'
})
</code></pre>
<p><strong>Hint&colon;</strong> You can also define a custom function for the logging part&period; Just pass a function&period; The first parameter will be the string that is logged&period;</p>
<h2 id="read-replication">Read replication</h2>
<p>Sequelize supports read replication&comma; i&period;e&period; having multiple servers that you can connect to when you want to do a SELECT query&period; When you do read replication&comma; you specify one or more servers to act as read replicas&comma; and one server to act as the write master&comma; which handles all writes and updates and propagates them to the replicas &lpar;note that the actual replication process is<strong>not </strong>handled by Sequelize&comma; but should be set up in MySql&rpar;&period;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', null, null, {
  dialect: 'mysql',
  port: 3306
  replication: {
    read: [
      { host: '8.8.8.8', username: 'anotherusernamethanroot', password: 'lolcats!' },
      { host: 'localhost', username: 'root', password: null }
    ],
    write: { host: 'localhost', username: 'root', password: null }
  },
  pool: { // If you want to override the options used for the read pool you can do so here
    maxConnections: 20,
    maxIdleTime: 30000
  },
})
</code></pre>
<p>If you have any general settings that apply to all replicas you do not need to provide them for each instance&period; In the code above&comma; database name and port is propagated to all replicas&period; The same will happen for user and password&comma; if you leave them out for any of the replicas&period; Each replica has the following options&colon;<code>host</code>&comma;<code>port</code>&comma;<code>username</code>&comma;<code>password</code>&comma;<code>database</code></p>
<p>Sequelize uses a pool to manage connections to your replicas&period; The default options are&colon;</p>
<pre><code class="language-js">{
  maxConnections: 10,
  minConnections: 0,
  maxIdleTime:    1000
}
</code></pre>
<p>If you want to modify these&comma; you can pass pool as an options when instantiating Sequelize&comma; as shown above&period;</p>
<p><strong>Note&colon;</strong> Read replication only works for MySQL at the moment&excl;</p>
<h2 id="dialects">Dialects</h2>
<p>With the release of Sequelize<code>v1&amp;period;6&amp;period;0</code>&comma; the library got independent from specific dialects&period; This means&comma; that you'll have to add the respective connector library to your project yourself. Version 1.7.0 stable has been released in bundles with the connector libraries (sequelize-mysql, sequelize-postgres etc.) but these bundles are not maintained, and will not be released for 2.0.0 upwards.</p>
<h3 id="mysql">MySQL</h3>
<p>In order to get Sequelize working nicely together with MySQL&comma; you'll need to install<code>mysql&amp;commat;~2&amp;period;0&amp;period;0-alpha7</code>or higher&period; Once that's done you can use it like this&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username', 'password', {
  // mysql is the default dialect, but you know...
  // for demo purporses we are defining it nevertheless :)
  // so: we want mysql!
  dialect: 'mysql'
})
</code></pre>
<p><strong>Note:</strong> You can pass options directly to dialect library by setting the
<code>dialectOptions</code> parameter. See <a href="/docs/latest/usage#options">Options</a>
for examples (currently only mysql and mariadb are supported).</p>
<h3 id="mariadb">MariaDB</h3>
<p>For MariaDB compatibility you have to install the package <code>mariasql@0.1.20</code>, or higher.
The configuration needs to look like this:</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username', 'password', {
  dialect: 'mariadb'
})
</code></pre>
<h3 id="sqlite">SQLite</h3>
<p>For SQLite compatibility you'll need<code>sqlite3&amp;commat;~2&amp;period;1&amp;period;5</code>&period; Configure Sequelize like this&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username', 'password', {
  // sqlite! now!
  dialect: 'sqlite',
 
  // the storage engine for sqlite
  // - default ':memory:'
  storage: 'path/to/database.sqlite'
})
</code></pre>
<h3 id="postgresql">PostgreSQL</h3>
<p>The library for PostgreSQL is<code>pg&amp;commat;~2&amp;period;0&amp;period;0</code>&period; You'll just need to define the dialect&colon;</p>
<pre><code class="language-js">var sequelize = new Sequelize('database', 'username', 'password', {
  // gimme postgres, please!
  dialect: 'postgres'
})
</code></pre>
<h2 id="executing-raw-sql-queries">Executing raw SQL queries</h2>
<p>As there are often use cases in which it is just easier to execute raw &sol; already prepared SQL queries&comma; you can utilize the function<code>sequelize&amp;period;query</code>&period;</p>
<p>Here is how it works&colon;</p>
<pre><code class="language-js">// Arguments for raw queries
sequelize.query('your query', [, callee], [, options], [, replacements])

// Quick example
sequelize.query(&quot;SELECT * FROM myTable&quot;).success(function(myTableRows) {
  console.log(myTableRows)
})

// Callee is the model definition. This allows you to easily map a query
// to a predefined model for sequelizejs e.g:
sequelize
  .query('SELECT * FROM projects', Projects)
  .success(function(projects){
    // Each record will now be mapped to the project's DAO-Factory.
    console.log(projects)
  })


// Options is an object with the following keys:
sequelize
  .query('SELECT 1', null, {
    // A function (or false) for logging your queries
    // Will get called for every SQL query that gets send
    // to the server.
    logging: console.log,

    // If plain is true, then sequelize will only return the first
    // record of the result set. In case of false it will all records.
    plain: false,

    // Set this to true if you don't have a model definition for your query.
    raw: false
  })

// Note the second argument being null!
// Even if we declared a callee here, the raw: true would
// supersede and return a raw object.
sequelize
  .query('SELECT * FROM projects', null, { raw: true })
  .success(function(projects) {
    console.log(projects)
  })
</code></pre>
<p>Replacements in a query can be done in two different ways, either using
named parameters (starting with <code>:</code>), or unnamed, represented by a ?</p>
<p>The syntax used depends on the fourth argument passed to the function:</p>
<ul>
<li>If an array is passed, <code>?</code> will be replaced in the order that they appear in the array</li>
<li>If an object is passed, <code>:key</code> will be replaced with the keys from that object.
If the object contains keys not found in the query or vice verca, an exception
will be thrown.</li>
</ul>
<pre><code class="language-js">sequelize
  .query(
    'SELECT * FROM projects WHERE status = ?', null,
    { raw: true }, ['active']
  )
  .success(function(projects) {
    console.log(projects)
  })

sequelize
  .query(
    'SELECT * FROM projects WHERE status = :status ', null,
    { raw: true }, { status: 'active' }
  )
  .success(function(projects) {
    console.log(projects)
  })
</code></pre>
<p><strong>One note:</strong> If the attribute names of the table contain dots, the resulting objects will be nested:</p>
<pre><code class="language-js">sequelize.query('select 1 as `foo.bar.baz`').success(function(rows) {
  console.log(JSON.stringify(rows))

  /*
    [{
      &quot;foo&quot;: {
        &quot;bar&quot;: {
          &quot;baz&quot;: 1
        }
      }
    }]
  */
})
</code></pre>
            </div>
          </div> 
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a>, using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>